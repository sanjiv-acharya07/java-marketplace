# java-marketplace
## Instructions
The Java package can be run on a Java compiler. The user can choose to operate as either a buyer or a seller.
### Testing
All methods have been tested using testcases that compare expected output to actual output of the method. **All tests will work when they are run individually.  However, if tests are run simultaneously, they will fail because some of the tests alter the contents of the files.**	
The Java package can be run on a Java compiler. The user can choose to operate as either a buyer or a seller.<br />
**Note -** All csv files that are imported by the seller must be in the following format and belong to the bracketed datatypes - store name (String), item name (String), price of item (double), description of item (String), quantity of item (int)
## Classes

### 1. **Seller**
### Basic Methods
The Seller class defines seller objects. Each seller object has the following attributes:
  - name
  - stores <br />

The Seller class contains a constructor, getter methods, and setter methods corresponding to these attributes.
### Functionalities
1. editProduct
- returns void
- parameters:Shop shop, Product product, String productNewName, String productNewDesc, int productNewQuantity, double productNewPrice<br /> 

The editProduct method allows sellers to edit details of the products in their stores.It contains the parameters corresponding to the shop object, product object,and the updated name, description, quantity, and price of the product. It parses through each seller's stores and their respective products.

2. exportProductFile 
- returns void
- parameters: ArrayList<Seller> sellers<br /> 

 This method prints all product details corresponding to a particular seller into a csv file. The user can export the file by downloading it from the working directory.
 
3. editProductsThroughFile
- returns void
- parameters: ArrayList<Seller> sellers, String filenameInitial, String filenameNew<br /> 

This method is used to update the attributes of the products. It reads the contents of the file with old product details, adds them to an ArrayList, and updates a new file with the a newly created, updated ArrayList.

4. readProductFile
- returns void
- parameters: ArrayList<Seller> sellers, String filename<br /> 
 
This method reads the product details from the files imported by the seller. It also associates the products with their corresponding stores.

5. deleteProductFile
- returns void
- parameters: ArrayList<Seller> sellers, String filename<br /> 

This method allows sellers to delete products using a csv file of the products to be deleted. The deleted products are reflected in their respective store objects.

6. readPreviousShoppingCart
- returns void
- parameters: none

This method associates all shopping carts which contain a seller's item with that seller. It associates sellers with products in shopping carts between sessions.

7. updateDetailedProduct
- returns void
- parameters: ArrayList<Seller> sellers

This method updates the detailed product file with changes made to products and stores.

### 2. **Product**
### Basic Methods
The Product class defines product objects. Each product object has the following attributes:
  - name
  - store
  - description
  - quantity
  - price
  - sold<br />

 The Product class contains a constructor, getter methods, and setter methods corresponding to these attributes.
### Functionalities
1. canPurchase
- returns boolean
- parameters: int amountPurchased, boolean print<br />

The canPurchase method is used to determine whether a customer can purchase an item. If teh customer attempts to add more products to their cart than is available in the store, an error message will be printed and they will be unable to add the product to their shopping cart.

2. revenue
- returns double
- parameters: none

The revenue method is used to calculate the total revenue generated by the product by mulitplying the price of the product with the number of units sold.

3. toString()
- returns String
- parameters: none

This method returns the product and its attributes in the form of a String.
 
### 3. **Customer**
### Basic Methods
The Customer class defines customer objects. Each customer object has the following attributes:
  - customer name
  - shopping cart
### Functionalities
1. checkFile 
- returns boolean
- parameters: none<br />

This method is used to determine the existence of a customer's shopping cart file. If the cart exists it returns true and returns else otherwise.

2. replenishCart
- returns void
- parameters: none<br />

The replenishCart method is used if the program determines that the customer is a returning patron. It checks if the customer's shopping cart contained any unpurchased products during their last session and adds these products to the shopping cart from the customer's shopping cart file.

3. clearCart
- returns void
- parameters: none <br />
 
The clearCart method clears the customer's shopping cart. It is used when the customer chooses to purchase all the items in their cart.

4. addToShoppingCart
- returns void
- parameters: ArrayList<Seller> sellers, Product product, int amount
- exceptions: IllegalPurchaseException<br />
 
The addToShoppingCart method adds products to the shopping cart. It parses through the cart to determine whether a certain product exists in the cart. If it does not exist, it adds the product to the cart. If the product already exists, it increases the quantity and price of the product present in the cart to reflect the changes made by the customer. It also adds the changes to the customer's shopping cart files.

5. removeProductShoppingCart
- returns void
- parameters: ArrayList<Seller> sellers, Product product<br />
 
The removeProductShoppingCart method allows users to remove products from their shopping cart. It parses through the customer's shopping cart to find the product passed as an argument. It then deletes the product and writes the updated shopping cart into the shopping cart file.

6. transactionHistory
- returns void
- parameters: none<br />
 
The transactionHistory method either creates a new transaction history file for new customers or appends an existing customer's new purchases to their existing transaction history files.

7. viewTransactionHistory
- returns void
- parameters: none
- exceptions: FileNotFoundException<br />
 
The viewTransactionHistory method allows the user to view their transaction history. It prints the contents of the customer's transaction history method.

### 4. **Shop**
### Basic Methods
The Shop method defines shop objects. Each shop object has the following attributes:
  - name
  - products<br />
 
The Shop class contains a constructor, getter methods, and setter methods corresponding to these attributes.
### Functionalities
1. addStoreNameToProduct
- returns ArrayList<Product>
- parameter: ArrayList<Product> products<br />
 
The addStoreNameToProduct method associates each product object with its respective store (shop object).
 
### 5. **setup**
The setup method associates all the sellers with their respective stores, and the stores with their respective products. It also reads the product details and store details from their respecitve files and adds them to ArrayLists. 
### Functionalities
1. loadStores
- returns ArrayList<Shop>
- parameters: String filename
- exceptions: IOException<br />
 
The loadStores method reads the names of all the different stores contained in the files and adds them to an ArrayList of shops.

 2. loadProducts
 - returns Product[] (array of type Product)
 - parameters: String filename<br />
 
The loadProducts method reads the name,store,price,quanitity, and description corresponding to each product and creates product object with those specific attributes. It then appends these products into an array of the type Product.

 3. matchProductsToShops
 - returns ArrayList<Shop>
 - parameters: none<br />
 
 The matchProductsToShops reads the files which contain store and product details and associates store objects with the products they contain. It then returns an ArrayList of these stores.

 4. initializeSellers
 - returns ArrayList<Seller>
 - parameters: String filename<br />
 The initializeSellers method reads the names of sellers and their stores. It then creates an array of Seller objects, each of which is associated with an ArrayList of the names of the seller's stores.
 
5. matchShopsToSellers
- returns ArrayList<Seller>
- parameters: none<br />
 
The matchShopsToSellers method allows the storage of Seller information between program runs. It calls the initializeSellers method and the matchProductsToShops method. It associates seller objects with their respective store objects.

 6. updateDetailedProduct
- returns void
- parameters: ArrayList<Seller> sellers<br />
 
The updateDetailedProduct method writes updates associated with seller objects into the files containing product details everytime a product is added to or removed from a shopping cart.

7. main method
- return void
- String[]
 This main method is purely for testing purposes.

### 6. **FileClass**
The fileclass class contains method which facilitate writing from and reading to files, displaying file contents, and sorting products in the marketplace.
### Functionalities
1. productDetails
- returns ArrayList<Product> 
- parameters: ArrayList<Seller> sellers, String search<br />
 
The productDetails method allows the user to search for the details of an item. If the item is found in any of the stores, it returns the name and details of the product. If the item is not found, it returns an error message.

2. printMarketPlace
- returns ArrayList<String>
- parameters: none
- exceptions: IOException<br />
 
This method loads all the products and their details into an ArrayList which is later displayed to the user.
 
3. searchProds
- returns ArrayList<Product> 
- parameters: ArrayList<Seller> sellers, String query
- exceptions: FileNotFoundException<br />
 
This method accepts the name of an item and searches for it within the marketplace. If the product is found, its attributes are displayed to the user.

4. sortAscQuantity
- returns String[]
- parameters: none<br />
 
The sortAscQuantity method reads from the files containing product details. It then sorts each of the products from lowest to largest quantity and displays sorted results to the user.

5. sortDescQuantity
- returns String[]
- parameters: none<br />
 
The sortDescQuantity method reads from the files containing product details. It then sorts each of the products from largest to lowest quantity and displays sorted results to the user.

6. sortAscPrice
- returns String[]
- parameters: none<br />
 
The sortAscPrice method reads from the files containing product details. It then sorts each of the products from lowest to largest price and displays sorted results to the user.
 
7. sortDescPrice
- returns String[]
- parameters: none<br />
 
The sortDescPrice method reads from the files containing product details. It then sorts each of the products from largest to lowest price and displays sorted results to the user.
 
### 7. **RunLocalTest**
This class contains all the test-cases that are used to test the methods of the package.The test-cases compare pre-written "expected output" with the actual output of the method.

### 8. **Main**
The Main class handles all user input and output. It allows the user to act as either a customer or a seller and provides a menu of options for each. It provides customers with options to view products, search for products, add products to their shopping carts, purchase products, view their previous purchase history, and export their purchase history in the form of a csv file. The main class allows sellers to create, edit, and delete the prodcuts in their stores either through csv files or directy through the program. Sellers can also view their total sales, view their products in customer shopping carts, and export files that contain product details.

The functionality of the main class is implemented by incorporating methods and objects from all the other classes using loops, conditional statements, and ArrayList methods

## Files
The application uses files to save all customer and seller details between sessions. 

1. gigasellers.txt<br />
This file stores the names of the sellers and their corresponding stores.

2. detailedProduct.txt<br />
This file stores the names and attributes of all products available in the marketplace. Each row of the file corresponds to a single product.

3. csv Files<br />
Sellers can import and export csv files that contain details of their products. The files are in the format - store name, item name, price, description, quantity
 
4. Seller Shopping Carts<br />
Each seller is assigned a file which contains details of all of their products that have been purchased and the total sales associated with each seller.
